<!DOCTYPE html><html lang="en"><head><meta name="robots" content="follow, index"/><meta name="description" content="Hi, I&#x27;m Agam. I&#x27;m a Freelance Back-end Engineer. I enjoy working with Express.js, but I&#x27;m always open to new possibilities of solving problems. In this blog/portfolio site, you can expect to find various writings and projects I made. Feel free to contact me for business inquiries at: agamdimaestra@gmail.com."/><meta property="og:site_name" content="Agam Dimaestra - Freelance Back-end Engineer"/><meta property="og:description" content="Hi, I&#x27;m Agam. I&#x27;m a Freelance Back-end Engineer. I enjoy working with Express.js, but I&#x27;m always open to new possibilities of solving problems. In this blog/portfolio site, you can expect to find various writings and projects I made. Feel free to contact me for business inquiries at: agamdimaestra@gmail.com."/><meta property="og:title" content="Agam Dimaestra - Freelance Back-end Engineer"/><meta property="og:image" content="./images/favicon.ico"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@yourname"/><meta name="twitter:title" content="Agam Dimaestra - Freelance Back-end Engineer"/><meta name="twitter:description" content="Hi, I&#x27;m Agam. I&#x27;m a Freelance Back-end Engineer. I enjoy working with Express.js, but I&#x27;m always open to new possibilities of solving problems. In this blog/portfolio site, you can expect to find various writings and projects I made. Feel free to contact me for business inquiries at: agamdimaestra@gmail.com."/><meta name="twitter:image" content="./images/favicon.ico"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"/><link rel="preload" href="/fonts/Inter-roman.latin.var.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><title>Next.js Pages</title><meta name="next-head-count" content="6"/><link rel="preload" href="./_next/static/css/5076a516e8a2b633.css" as="style"/><link rel="stylesheet" href="./_next/static/css/5076a516e8a2b633.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="./_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="./_next/static/chunks/webpack-11d48316910fc807.js" defer=""></script><script src="./_next/static/chunks/framework-d5c96c6d07ca9fe9.js" defer=""></script><script src="./_next/static/chunks/main-e47bb435dabe4202.js" defer=""></script><script src="./_next/static/chunks/pages/_app-e89de317f965cd3b.js" defer=""></script><script src="./_next/static/chunks/353-9c855d83cc7ddaed.js" defer=""></script><script src="./_next/static/chunks/pages/posts/pages-8c483101f12d563f.js" defer=""></script><script src="./_next/static/lPLMTwbKqce4p6-SaYpkn/_buildManifest.js" defer=""></script><script src="./_next/static/lPLMTwbKqce4p6-SaYpkn/_ssgManifest.js" defer=""></script><script src="./_next/static/lPLMTwbKqce4p6-SaYpkn/_middlewareManifest.js" defer=""></script><style id="__jsx-7c359fde634f3543">a.jsx-7c359fde634f3543{float:right}
@media screen and (max-width:480px) {article.jsx-7c359fde634f3543{padding-top:2rem;
padding-bottom:4rem}}</style></head><body><div id="__next" data-reactroot=""><article class="container prose prose-sm md:prose dark:prose-dark"><h1>Next.js Pages</h1><div class="meta-line"><div class="meta">You<!-- -->, <time>Thu Mar 18 2021</time> â€¢ <a class="tag" href="/tags/web%20development">web development</a></div><a class="meta-back" href="/posts">Back</a><span aria-label="Toggle Dark Mode" class="text-current p-2 cursor-pointer ml-3" tabindex="0"><svg fill="none" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></div>
<p>In Next.js, a <strong>page</strong> is a <a href="https://reactjs.org/docs/components-and-props.html">React Component</a> exported from a <code>.js</code>, <code>.jsx</code>, <code>.ts</code>, or <code>.tsx</code> file in the <code>pages</code> directory. Each page is associated with a route based on its file name.</p>
<p><strong>Example</strong>: If you create <code>pages/about.js</code> that exports a React component like below, it will be accessible at <code>/about</code>.</p>
<pre><code>function About() {
  return &lt;div&gt;About&lt;/div&gt;
}

export default About
</code></pre>
<h3>Pages with Dynamic Routes</h3>
<p>Next.js supports pages with dynamic routes. For example, if you create a file called <code>pages/posts/[id].js</code>, then it will be accessible at <code>posts/1</code>, <code>posts/2</code>, etc.</p>
<blockquote>
<p>To learn more about dynamic routing, check the <a href="/docs/routing/dynamic-routes.md">Dynamic Routing documentation</a>.</p>
</blockquote>
<h2>Pre-rendering</h2>
<p>By default, Next.js <strong>pre-renders</strong> every page. This means that Next.js generates HTML for each page in advance, instead of having it all done by client-side JavaScript. Pre-rendering can result in better performance and SEO.</p>
<p>Each generated HTML is associated with minimal JavaScript code necessary for that page. When a page is loaded by the browser, its JavaScript code runs and makes the page fully interactive. (This process is called <em>hydration</em>.)</p>
<h3>Two forms of Pre-rendering</h3>
<p>Next.js has two forms of pre-rendering: <strong>Static Generation</strong> and <strong>Server-side Rendering</strong>. The difference is in <strong>when</strong> it generates the HTML for a page.</p>
<ul>
<li><a href="#static-generation-recommended"><strong>Static Generation (Recommended)</strong></a>: The HTML is generated at <strong>build time</strong> and will be reused on each request.</li>
<li><a href="#server-side-rendering"><strong>Server-side Rendering</strong></a>: The HTML is generated on <strong>each request</strong>.</li>
</ul>
<p>Importantly, Next.js lets you <strong>choose</strong> which pre-rendering form you&#x27;d like to use for each page. You can create a &quot;hybrid&quot; Next.js app by using Static Generation for most pages and using Server-side Rendering for others.</p>
<p>We <strong>recommend</strong> using <strong>Static Generation</strong> over Server-side Rendering for performance reasons. Statically generated pages can be cached by CDN with no extra configuration to boost performance. However, in some cases, Server-side Rendering might be the only option.</p>
<p>You can also use <strong>Client-side Rendering</strong> along with Static Generation or Server-side Rendering. That means some parts of a page can be rendered entirely by client side JavaScript. To learn more, take a look at the <a href="/docs/basic-features/data-fetching.md#fetching-data-on-the-client-side">Data Fetching</a> documentation.</p>
<h2>Static Generation (Recommended)</h2>
<p>If a page uses <strong>Static Generation</strong>, the page HTML is generated at <strong>build time</strong>. That means in production, the page HTML is generated when you run <code>next build</code> . This HTML will then be reused on each request. It can be cached by a CDN.</p>
<p>In Next.js, you can statically generate pages <strong>with or without data</strong>. Let&#x27;s take a look at each case.</p>
<h3>Static Generation without data</h3>
<p>By default, Next.js pre-renders pages using Static Generation without fetching data. Here&#x27;s an example:</p>
<pre><code>function About() {
  return &lt;div&gt;About&lt;/div&gt;
}

export default About
</code></pre>
<p>Note that this page does not need to fetch any external data to be pre-rendered. In cases like this, Next.js generates a single HTML file per page during build time.</p>
<h3>Static Generation with data</h3>
<p>Some pages require fetching external data for pre-rendering. There are two scenarios, and one or both might apply. In each case, you can use a special function Next.js provides:</p>
<ol>
<li>Your page <strong>content</strong> depends on external data: Use <code>getStaticProps</code>.</li>
<li>Your page <strong>paths</strong> depend on external data: Use <code>getStaticPaths</code> (usually in addition to <code>getStaticProps</code>).</li>
</ol>
<h4>Scenario 1: Your page <strong>content</strong> depends on external data</h4>
<p><strong>Example</strong>: Your blog page might need to fetch the list of blog posts from a CMS (content management system).</p>
<pre><code>// TODO: Need to fetch `posts` (by calling some API endpoint)
//       before this page can be pre-rendered.
function Blog({ posts }) {
  return (
    &lt;ul&gt;
      {posts.map((post) =&gt; (
        &lt;li&gt;{post.title}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  )
}

export default Blog
</code></pre>
<p>To fetch this data on pre-render, Next.js allows you to <code>export</code> an <code>async</code> function called <code>getStaticProps</code> from the same file. This function gets called at build time and lets you pass fetched data to the page&#x27;s <code>props</code> on pre-render.</p>
<pre><code>function Blog({ posts }) {
  // Render posts...
}

// This function gets called at build time
export async function getStaticProps() {
  // Call an external API endpoint to get posts
  const res = await fetch(&#x27;https://.../posts&#x27;)
  const posts = await res.json()

  // By returning { props: { posts } }, the Blog component
  // will receive `posts` as a prop at build time
  return {
    props: {
      posts
    }
  }
}

export default Blog
</code></pre>
<p>To learn more about how <code>getStaticProps</code> works, check out the <a href="/docs/basic-features/data-fetching.md#getstaticprops-static-generation">Data Fetching documentation</a>.</p>
<h4>Scenario 2: Your page paths depend on external data</h4>
<p>Next.js allows you to create pages with <strong>dynamic routes</strong>. For example, you can create a file called <code>pages/posts/[id].js</code> to show a single blog post based on <code>id</code>. This will allow you to show a blog post with <code>id: 1</code> when you access <code>posts/1</code>.</p>
<blockquote>
<p>To learn more about dynamic routing, check the <a href="/docs/routing/dynamic-routes.md">Dynamic Routing documentation</a>.</p>
</blockquote>
<p>However, which <code>id</code> you want to pre-render at build time might depend on external data.</p>
<p><strong>Example</strong>: suppose that you&#x27;ve only added one blog post (with <code>id: 1</code>) to the database. In this case, you&#x27;d only want to pre-render <code>posts/1</code> at build time.</p>
<p>Later, you might add the second post with <code>id: 2</code>. Then you&#x27;d want to pre-render <code>posts/2</code> as well.</p>
<p>So your page <strong>paths</strong> that are pre-rendered depend on external data**.** To handle this, Next.js lets you <code>export</code> an <code>async</code> function called <code>getStaticPaths</code> from a dynamic page (<code>pages/posts/[id].js</code> in this case). This function gets called at build time and lets you specify which paths you want to pre-render.</p>
<pre><code>// This function gets called at build time
export async function getStaticPaths() {
  // Call an external API endpoint to get posts
  const res = await fetch(&#x27;https://.../posts&#x27;)
  const posts = await res.json()

  // Get the paths we want to pre-render based on posts
  const paths = posts.map((post) =&gt; ({
    params: { id: post.id }
  }))

  // We&#x27;ll pre-render only these paths at build time.
  // { fallback: false } means other routes should 404.
  return { paths, fallback: false }
}
</code></pre>
<p>Also in <code>pages/posts/[id].js</code>, you need to export <code>getStaticProps</code> so that you can fetch the data about the post with this <code>id</code> and use it to pre-render the page:</p>
<pre><code>function Post({ post }) {
  // Render post...
}

export async function getStaticPaths() {
  // ...
}

// This also gets called at build time
export async function getStaticProps({ params }) {
  // params contains the post `id`.
  // If the route is like /posts/1, then params.id is 1
  const res = await fetch(`https://.../posts/${params.id}`)
  const post = await res.json()

  // Pass post data to the page via props
  return { props: { post } }
}

export default Post
</code></pre>
<p>To learn more about how <code>getStaticPaths</code> works, check out the <a href="/docs/basic-features/data-fetching.md#getstaticpaths-static-generation">Data Fetching documentation</a>.</p>
<h3>When should I use Static Generation?</h3>
<p>We recommend using <strong>Static Generation</strong> (with and without data) whenever possible because your page can be built once and served by CDN, which makes it much faster than having a server render the page on every request.</p>
<p>You can use Static Generation for many types of pages, including:</p>
<ul>
<li>Marketing pages</li>
<li>Blog posts</li>
<li>E-commerce product listings</li>
<li>Help and documentation</li>
</ul>
<p>You should ask yourself: &quot;Can I pre-render this page <strong>ahead</strong> of a user&#x27;s request?&quot; If the answer is yes, then you should choose Static Generation.</p>
<p>On the other hand, Static Generation is <strong>not</strong> a good idea if you cannot pre-render a page ahead of a user&#x27;s request. Maybe your page shows frequently updated data, and the page content changes on every request.</p>
<p>In cases like this, you can do one of the following:</p>
<ul>
<li>Use Static Generation with <strong>Client-side Rendering:</strong> You can skip pre-rendering some parts of a page and then use client-side JavaScript to populate them. To learn more about this approach, check out the <a href="/docs/basic-features/data-fetching.md#fetching-data-on-the-client-side">Data Fetching documentation</a>.</li>
<li>Use <strong>Server-Side Rendering:</strong> Next.js pre-renders a page on each request. It will be slower because the page cannot be cached by a CDN, but the pre-rendered page will always be up-to-date. We&#x27;ll talk about this approach below.</li>
</ul>
<h2>Server-side Rendering</h2>
<blockquote>
<p>Also referred to as &quot;SSR&quot; or &quot;Dynamic Rendering&quot;.</p>
</blockquote>
<p>If a page uses <strong>Server-side Rendering</strong>, the page HTML is generated on <strong>each request</strong>.</p>
<p>To use Server-side Rendering for a page, you need to <code>export</code> an <code>async</code> function called <code>getServerSideProps</code>. This function will be called by the server on every request.</p>
<p>For example, suppose that your page needs to pre-render frequently updated data (fetched from an external API). You can write <code>getServerSideProps</code> which fetches this data and passes it to <code>Page</code> like below:</p>
<pre><code>function Page({ data }) {
  // Render data...
}

// This gets called on every request
export async function getServerSideProps() {
  // Fetch data from external API
  const res = await fetch(`https://.../data`)
  const data = await res.json()

  // Pass data to the page via props
  return { props: { data } }
}

export default Page
</code></pre>
<p>As you can see, <code>getServerSideProps</code> is similar to <code>getStaticProps</code>, but the difference is that <code>getServerSideProps</code> is run on every request instead of on build time.</p>
<p>To learn more about how <code>getServerSideProps</code> works, check out our <a href="/docs/basic-features/data-fetching.md#getserversideprops-server-side-rendering">Data Fetching documentation</a></p>
<h2>Summary</h2>
<p>We&#x27;ve discussed two forms of pre-rendering for Next.js.</p>
<ul>
<li><strong>Static Generation (Recommended):</strong> The HTML is generated at <strong>build time</strong> and will be reused on each request. To make a page use Static Generation, either export the page component, or export <code>getStaticProps</code> (and <code>getStaticPaths</code> if necessary). It&#x27;s great for pages that can be pre-rendered ahead of a user&#x27;s request. You can also use it with Client-side Rendering to bring in additional data.</li>
<li><strong>Server-side Rendering:</strong> The HTML is generated on <strong>each request</strong>. To make a page use Server-side Rendering, export <code>getServerSideProps</code>. Because Server-side Rendering results in slower performance than Static Generation, use this only if absolutely necessary.</li>
</ul><small style="display:block;margin-top:8rem" class="jsx-7c359fde634f3543"><time class="jsx-7c359fde634f3543">2022</time> Â© Agam Dimaestra.<a href="/feed.xml" class="jsx-7c359fde634f3543">RSS</a></small></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/posts/pages","query":{},"buildId":"lPLMTwbKqce4p6-SaYpkn","assetPrefix":".","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>